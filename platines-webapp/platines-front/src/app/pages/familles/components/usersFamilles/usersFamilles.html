<!--

    (c) Copyright 2017-2024, ANS. All rights reserved.

-->
<div class="widgets">
  <div class="col-lg-12 col-md-12">
    <div class="card">

      <nav aria-label="Fil d'ariane" class="breadcrumb-wrapper" role="navigation">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a routerLink="/pages/accueil" translate>pages.home.title
            <svg aria-hidden="true" class="svg-icon svg-angle-right" focusable="false">
              <use xlink:href="svg-icons/icon-sprite.svg#angle-right"></use>
            </svg>
          </a></li>
          <li class="breadcrumb-item"><a routerLink="../listFamilles" translate>pages.families.title
            <svg aria-hidden="true" class="svg-icon svg-angle-right" focusable="false">
              <use xlink:href="svg-icons/icon-sprite.svg#angle-right"></use>
            </svg>
          </a></li>
          <li class="breadcrumb-item">
            <a [queryParams]="{id:family.id}" routerLink="./" translate>pages.user-families.title
              <svg aria-hidden="true" class="svg-icon svg-angle-right" focusable="false"></svg>
            </a></li>
        </ol>
      </nav>

      <div class="card-header clearfix">
        <h3 class="card-title" translate>pages.user-families.title</h3>
      </div>
      <div class="card-body">
        <h5 style="margin: 20px; display: inline-block">Thème : {{family?.name}}</h5>
        <div class="info">
          <div class="col-md-6">
            <div class="div-info">
              <span>
              <h5 style="margin: 20px; display: inline-block" translate>{{this.labelsPath}}.unassigned-users</h5>
              <div class="table-responsive">
                <table (matSortChange)="sortUnassignedData($event)" [dataSource]="unassignedUsersDataSource" aria-label="Liste des éditeurs" mat-table matSort>
                  <ng-container *ngFor="let column of unassignedUsersAutoColumns" [matColumnDef]="column">
                    <th *matHeaderCellDef mat-header-cell mat-sort-header>
                      <span translate>{{this.labelsPath}}.{{ column }}</span>
                    </th>
                    <td *matCellDef="let emp" mat-cell>{{ emp[column] }}</td>
                  </ng-container>

                  <ng-container matColumnDef="checkbox">
                    <th *matHeaderCellDef mat-header-cell>
                      <div class="custom-control custom-checkbox">
                        <input (click)="setAllUnassigned($event)" [checked]="isAllUnassignedUsersSelected()" [indeterminate]="!isAllUnassignedUsersSelected() && unassignedUsersSelection.hasValue()" class="custom-control-input" type="checkbox">
                      </div>
                    </th>
                    <td *matCellDef="let element" mat-cell>
                      <div class="custom-control custom-checkbox">
                        <input (change)="setRowUnassigned(element)" [checked]="unassignedUsersSelection.isSelected(element)" class="custom-control-input" type="checkbox">
                      </div>
                    </td>
                  </ng-container>

                  <tr *matNoDataRow><td class="text-center" colspan="6" translate>pages.user-families.no-users</td></tr>
                  <tr *matHeaderRowDef="unassignedUsersAllColumns" mat-header-row></tr>
                  <tr *matRowDef="let emprow; columns: unassignedUsersAllColumns" mat-row></tr>
                </table>
              </div>
                </span>
              <mat-paginator
                ansPaginatorStyle
                [length]="unassignedUsersDataSource.data.length"
                [showTotalPages]="2"
                [pageSizeOptions]="[7,10,20,50]"
                aria-label="Select page of users">
              </mat-paginator>
            </div>
          </div>
          <div class="col-md-6">
            <div class="div-info">
              <span>
              <h5 style="margin: 20px; display: inline-block" translate>{{this.labelsPath}}.assigned-users</h5>

              <div class="table-responsive">
                <table (matSortChange)="sortAssignedData($event)" [dataSource]="assignedUsersDataSource" aria-label="Liste des éditeurs" mat-table matSort>
                  <ng-container *ngFor="let column of assignedUsersAutoColumns" [matColumnDef]="column">
                    <th *matHeaderCellDef mat-header-cell mat-sort-header>
                      <span translate>{{this.labelsPath}}.{{ column }}</span>
                    </th>
                    <td *matCellDef="let emp" mat-cell>{{ emp[column] }}</td>
                  </ng-container>

                  <ng-container matColumnDef="checkbox">
                    <th *matHeaderCellDef mat-header-cell>
                      <div class="custom-control custom-checkbox">

                        <input (click)="setAllAssigned($event)" [checked]="isAllAssignedUsersSelected()" [indeterminate]="!isAllAssignedUsersSelected() && assignedUsersSelection.hasValue()" class="custom-control-input" type="checkbox">
                      </div>
                    </th>
                    <td *matCellDef="let element" mat-cell>
                        <div class="custom-control custom-checkbox">
                          <input (change)="setRowAssigned(element)" [checked]="assignedUsersSelection.isSelected(element)" class="custom-control-input" type="checkbox">
                        </div>
                    </td>
                  </ng-container>

                  <tr *matNoDataRow><td class="text-center" colspan="6" translate>pages.user-families.no-users</td></tr>
                  <tr *matHeaderRowDef="assignedUsersAllColumns" mat-header-row></tr>
                  <tr *matRowDef="let emprow; columns: assignedUsersAllColumns" mat-row></tr>
                </table>
              </div>
              </span>
              <mat-paginator
                ansPaginatorStyle
                [length]="assignedUsersDataSource.data.length"
                [showTotalPages]="2"
                [pageSizeOptions]="[7,10,20,50]"
                aria-label="Select page of users">
              </mat-paginator>
            </div>
          </div>
          <div class="littlearea">
            <a (click)="assign()" class="arrow right"></a> <a (click)="unassign()" class="arrow left"></a>
          </div>
        </div>
        <div class="divBtn">
          <button class="btn btn--default btn--ghost" routerLink="/pages/familles/listFamilles" type="submit">
            <span translate>commons.actions.cancel</span>
          </button>
          <button (click)="validate()" class="btn btn--plain btn--primary" type="submit">
            <span translate>commons.actions.validate</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
